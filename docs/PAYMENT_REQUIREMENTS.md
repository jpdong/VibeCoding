# VibeCoding 付费功能需求文档

## 项目背景
VibeCoding 是一个代码生成工具网站，需要接入 Creem 支付系统以满足审核要求：确保价格对用户透明易见。

## 产品定位
- 代码生成 AI 工具
- 多层次使用限制
- 订阅制付费模式

## 用户使用层级

### 1. 未登录用户
- **使用限制**：每天可使用 10 次代码生成
- **计数方式**：基于 IP 地址
- **限制重置**：每日 00:00 重置

### 2. 已登录用户（免费）
- **使用限制**：每天可使用 30 次代码生成
- **计数方式**：基于用户账户
- **限制重置**：每日 00:00 重置

### 3. 付费用户（Premium）
- **使用限制**：每天可使用 50 次代码生成
- **订阅价格**：$9.9/月
- **订阅类型**：自动续费订阅制
- **计数方式**：基于用户账户
- **限制重置**：每日 00:00 重置

## 功能要求

### 1. 使用次数管理
- 实时计数和限制检查
- 每日自动重置计数
- 不同用户类型的差异化限制
- 使用次数实时显示

### 2. 价格展示
- 首页价格展示区域
- 明确的价格标识：$9.9/月
- 功能对比表格
- "升级到 Premium" 按钮

### 3. 支付集成
- 集成 Creem 支付系统
- 支持信用卡/借记卡支付
- 自动续费功能
- 支付成功/失败处理

### 4. 用户界面
- 使用次数显示组件
- 升级提示弹窗
- 订阅管理页面
- 支付历史记录

### 5. 后端管理
- 订阅状态管理
- 支付状态同步
- 使用次数统计
- 用户权限验证

## 技术要求

### 数据库设计
需要新增以下表：

1. **subscription_plans** - 订阅计划表
2. **user_subscriptions** - 用户订阅表
3. **daily_usage** - 每日使用统计表
4. **payment_records** - 支付记录表

### API 接口
1. 获取用户订阅状态
2. 创建订阅订单
3. 处理支付回调
4. 查询使用次数
5. 更新使用计数

### 前端组件
1. 价格展示组件
2. 使用次数显示
3. 升级提示框
4. 支付页面
5. 订阅管理页面

## 用户体验流程

### 新用户流程
1. 访问网站 → 看到价格信息
2. 未登录使用 10 次后 → 提示登录
3. 登录后使用 20 次后 → 提示升级
4. 点击升级 → 进入支付页面
5. 完成支付 → 获得 Premium 权限

### 付费用户流程
1. 登录后自动识别 Premium 状态
2. 显示剩余使用次数（50次/天）
3. 可在设置页面管理订阅
4. 支持取消/恢复订阅

## 合规要求

### Creem 审核要求
- ✅ 价格信息在主页明显展示
- ✅ 功能差异清晰说明
- ✅ 支付流程透明
- ✅ 退款政策明确

### 数据安全
- 支付数据不存储敏感信息
- 符合 PCI DSS 标准
- 用户数据加密存储

## 成功指标
- 价格展示清晰度 > 95%
- 支付转化率 > 3%
- 用户留存率 > 60%
- 系统稳定性 > 99.9%